<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>零用金支出帳簿</title>
</head>
<body>
  <h3>輸入店家</h3>

  <!-- 輸入框 -->
  <input list="storeList" id="store" placeholder="輸入或選擇店家">
  <!-- 自動提示清單 -->
  <datalist id="storeList"></datalist>

  <script>
    document.addEventListener("DOMContentLoaded", loadStores);

    async function loadStores() {
      try {
        const res = await fetch("https://script.google.com/macros/s/你的GAS_ID/exec", {
          method: "POST",
          body: JSON.stringify({
            type: "query",
            command: "店家",
            startDate: "2025-01-01",  // 可依需求帶值
            endDate: "2025-12-31"
          })
        });

        const data = await res.json();

        if (data.ok && data.storeList) {
          const datalist = document.getElementById("storeList");
          datalist.innerHTML = ""; // 先清空
          data.storeList.forEach(store => {
            const option = document.createElement("option");
            option.value = store;
            datalist.appendChild(option);
          });
        } else {
          console.warn("查無店家清單");
        }
      } catch (err) {
        console.error("讀取店家清單失敗 ❌", err);
      }
    }
  </script>
</body>
</html>
