<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>店家提示範例(GAS)</title>
  <style>
    #store { width: 300px; padding: 8px; font-size: 20px; }
    #suggestions { border:1px solid #ccc; display:none; position:absolute; background:white; max-height:150px; overflow-y:auto; }
    #suggestions div { padding:5px; cursor:pointer; }
    #suggestions div:hover { background:#eee; }
  </style>
</head>
<body>
  <h2>輸入店家名稱，會即時提示</h2>
  <input type="text" id="store" placeholder="輸入或選擇店家">
  <div id="suggestions"></div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbwQJQAlzxJ3LLLcDOIHrEuAdvFpjtznSWv_Knj-9rBHQzHxtDDuTZyygh2gvBxyKhbtcw/exec"; // 替換成你的 GAS URL
    let storeList = []; // 從 GAS 取得的完整清單
    const input = document.getElementById("store");
    const sugg = document.getElementById("suggestions");

    // 取得 storeList
    async function loadStoreList() {
      try {
        const res = await fetch(`${API_URL}?type=query&command=店家`);
        const data = await res.json();
        if (data.ok && data.storeList) {
          storeList = data.storeList;
          console.log("載入店家清單成功:", storeList);
        } else {
          console.error("GAS 回傳格式不正確:", data);
        }
      } catch (err) {
        console.error("載入店家清單失敗:", err);
      }
    }

    loadStoreList(); // 頁面載入時呼叫

    // 即時提示
    input.addEventListener("input", () => {
      const val = input.value.toLowerCase();
      sugg.innerHTML = "";
      if (!val) { sugg.style.display = "none"; return; }

      const matches = storeList.filter(s => s.toLowerCase().includes(val));
      if (matches.length === 0) { sugg.style.display = "none"; return; }

      matches.forEach(m => {
        const div = document.createElement("div");
        div.textContent = m;
        div.onclick = () => { input.value = m; sugg.style.display = "none"; };
        sugg.appendChild(div);
      });

      // 顯示 suggestions
      sugg.style.display = "block";
      const rect = input.getBoundingClientRect();
      sugg.style.width = rect.width + "px";
      sugg.style.top = (rect.bottom + window.scrollY) + "px";
      sugg.style.left = (rect.left + window.scrollX) + "px";
    });
  </script>
</body>
</html>








